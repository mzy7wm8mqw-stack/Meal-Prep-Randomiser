<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meal Prep Randomiser</title>
  <link rel="icon" href="icon.png">
  <style>
    body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif; padding: 20px; max-width: 780px; }
    .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    fieldset{ margin:10px 0; padding:12px; border-radius:8px; }
    button { padding: 8px 12px; margin: 6px 0; cursor: pointer; border-radius:6px; }
    pre { background: #f7f7f7; padding: 12px; white-space: pre-wrap; border-radius:6px; }
    label{ font-size:14px; }
  </style>
</head>
<body>

<h1>Meal Prep Randomiser</h1>

<fieldset>
  <legend><strong>Protein</strong></legend>
  <div class="row">
    <label><input type="radio" name="protein" value="chicken" checked> Chicken</label>
    <label><input type="radio" name="protein" value="salmon"> Salmon</label>
    <label><input type="radio" name="protein" value="tuna"> Tuna</label>
  </div>
</fieldset>

<fieldset>
  <legend><strong>Carb</strong></legend>
  <div class="row">
    <label><input type="radio" name="carb" value="Rice" checked> Rice</label>
    <label><input type="radio" name="carb" value="Noodles"> Noodles</label>
    <label><input type="radio" name="carb" value="Pumpkin"> Pumpkin</label>
    <label><input type="radio" name="carb" value="Mash"> Mash</label>
    <label><input type="radio" name="carb" value="Pasta"> Pasta</label>
  </div>
</fieldset>

<fieldset>
  <legend><strong>Veg</strong></legend>
  <div class="row">
    <label><input type="radio" name="veg" value="Frozen stir-fry mix" checked> Frozen Stir-Fry Mix</label>
    <label><input type="radio" name="veg" value="Frozen peas"> Frozen Peas</label>
    <label><input type="radio" name="veg" value="Frozen edamame"> Frozen Edamame</label>
    <label><input type="radio" name="veg" value="Frozen spinach"> Frozen Spinach</label>
    <label><input type="radio" name="veg" value="Frozen corn"> Frozen Corn</label>
    <label><input type="radio" name="veg" value="Frozen broccoli/cauli"> Frozen Broccoli/Cauli</label>
    <label><input type="radio" name="veg" value="Cucumber"> Cucumber</label>
    <label><input type="radio" name="veg" value="Cherry tomatoes"> Cherry Tomatoes</label>
    <label><input type="radio" name="veg" value="Pre-washed salad mixes"> Pre-Washed Salad Mixes</label>
  </div>
</fieldset>

<div class="row">
  <button onclick="generateWeeklyFlavours()">Generate Weekly Flavours</button>
</div>

<h3>Weekly Flavours</h3>
<pre id="weekly">(no flavours generated yet)</pre>

<script>
const flavours = [
  "Chilli Oil","Teriyaki Soy","Lemon Herb","Garlic Yoghurt","BBQ","Pesto","Curry","Soy","Ochazuke","Avo","Noodle Soup"
];

const exclusions = {
  chicken: ["Avo"],
  salmon: ["Garlic Yoghurt","BBQ"],
  tuna: ["Pesto","Curry","Teriyaki Soy","Lemon Herb"]
};

const flavourPairings = {
  "Ochazuke": { carb: null, veg: ["Frozen Stir-Fry Mix","Frozen Peas","Frozen Edamame","Frozen Spinach","Frozen Corn","Frozen Broccoli/Cauli"] },
  "Noodle Soup": { carb: null, veg: ["Frozen Stir-Fry Mix","Frozen Peas","Frozen Edamame","Frozen Spinach","Frozen Corn","Frozen Broccoli/Cauli"] }
};

let weeklyFlavoursByProtein = {};

function getSelected(name){
  return document.querySelector('input[name="'+name+'"]:checked').value;
}

function pickN(arr,n){
  const copy = [...arr];
  for(let i=copy.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[copy[i],copy[j]]=[copy[j],copy[i]];}
  return copy.slice(0,n);
}

function validFlavoursFor(p){
  const carb = getSelected('carb');
  return flavours.filter(f => {
    if(exclusions[p].includes(f)) return false;
    if(f === 'Ochazuke' && carb !== 'Rice') return false;
    if(f === 'Noodle Soup' && carb !== 'Noodles') return false;
    return true;
  });
}

function generateWeeklyFlavours(){
  const protein = getSelected('protein');
  const valid = validFlavoursFor(protein);
  weeklyFlavoursByProtein[protein] = pickN(valid, Math.min(3, valid.length));
  document.getElementById('weekly').textContent = protein.charAt(0).toUpperCase()+protein.slice(1)+': '+weeklyFlavoursByProtein[protein].join(', ');
}
</script>

</body>
</html>
